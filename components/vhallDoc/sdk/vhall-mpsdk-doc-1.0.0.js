module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Event={EVENTPAGECHANGE:"EVENTPAGECHANGE",EVENTSWITCHCHANGE:"EVENTSWITCHCHANGE",CREATECONTAINER:"CREATECONTAINER",DESTROYCONTAINER:"DESTROYCONTAINER",ACTIVECONTAINER:"ACTIVECONTAINER",ADDRECT:"ADDRECT",ADDELLIPSE:"ADDELLIPSE",ADDTRIANGLE:"ADDTRIANGLE",ADDRIGHTTRIANGLE:"ADDRIGHTTRIANGLE",FREEBRUSH:"FREEBRUSH",LOADDOC:"LOADDOC"},e.API_URL={SENDSPECIAL:"/v2/message/send-special",GETWATCHINFO:"/v2/document/get-watch-info",GETDOCINFO:"/v2/document/get-info",RESETWATCHINFO:"/v2/document/reset-watch-info"},e.OPERATETYPE={SWITCHON:"switchon",SWITCHOFF:"switchoff",OPERATE:"operate",ONSLIDERCHANGE:"onSlideChange",FILPOVER:"filpover",DESTROY:"destroy",CREATE:"create",ACTIVE:"active"},e.ROLE_TYPE={HOST:1,GUEST:2,SPECTATOR:3,ASSISTANT:4}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.canvasData={switchStatus:!1,currentCid:"",currentPen:"",currentStrokeWidth:2,currentStroke:"black"}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.dispatcher={eventListeners:{}}}Object.defineProperty(e,"__esModule",{value:!0});var o=new(function(t,e,n){e&&r(t.prototype,e)}(i,[{key:"on",value:function(t,e){void 0===this.dispatcher.eventListeners[t]&&(this.dispatcher.eventListeners[t]=[]),this.dispatcher.eventListeners[t].push(e)}},{key:"off",value:function(t,e){if(this.dispatcher.eventListeners[t]){var n=this.dispatcher.eventListeners[t].indexOf(e);-1!==n&&this.dispatcher.eventListeners[t].splice(n,1)}}},{key:"emit",value:function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!n||!t)throw new Error("Undefined event");for(var i=this.dispatcher.eventListeners[t]||[],o=0;o<i.length;o+=1)i[o].apply(i,n)}}]),i);e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateUUID=function(t,e){var n=0<arguments.length&&void 0!==t?t:"",r=1<arguments.length&&void 0!==e?e:5,i=(new Date).getTime(),o=new Array(r).fill("x").join("").replace(/[xy]/g,(function(t){var e=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?e:3&e|8).toString(16)}));return""===n?o:n+"-"+o},e.specialPoint=function(t){var e=0,n=0,r=0,i=0,o=!0,s=!1,a=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=c.value;switch(h[0]){case"M":e=n=h[1],r=i=h[2];break;case"Q":var f=[h[1],h[3],e,n];e=Math.min.apply(null,f),n=Math.max.apply(null,f);var l=[h[2],h[4],r,i];r=Math.min.apply(null,l),i=Math.max.apply(null,l);break;case"L":e=e<h[1]?e:h[1],n=n>h[1]?n:h[1],r=r<h[2]?r:h[2],i=i>h[2]?i:h[2]}}}catch(t){s=!0,a=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw a}}return{minLeft:e,maxRight:n,minTop:r,maxBottom:i}}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(5),o=n(10),s=n(0),a=p(n(11)),c=p(n(12)),u=n(16),h=p(n(17)),f=p(n(2)),l=n(18);function p(t){return t&&t.__esModule?t:{default:t}}function d(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),this.socket=null,this.createInstance=this.createInstance.bind(this),this.init=this.init.bind(this),this.out=null,this.deferQueue=new l.DeferQueue,this.Permission=new h.default}var y=new(function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(d,[{key:"init",value:function(t){var e=this;return this.out=new a.default(t,this.deferQueue,this.Permission),this.socket=new i.Base(t,this.out),new Promise((function(t,n){e.socket.init((function(e){t(e)}),(function(t){n(t)}))}))}},{key:"connectMessageService",value:function(){var t=this;return new Promise((function(e,n){t.socket.connect((function(t){e(t)}),(function(t){switch(t){case"应用查询为空":n({code:"611030",message:"appId不存在",data:{}});break;default:n({code:"611000",message:"初始化房间失败",data:{}})}}))}))}},{key:"disconnectMessageService",value:function(){this.socket&&(this.socket.disconnect(),this.socket=null)}},{key:"createInstance",value:function(t,e,n){var r=this,i=2<arguments.length&&void 0!==n?n:function(){},a=t.appId,h=t.channelId,l=t.accountId,p=t.token,d=t.THIS,y=t.canvasBoxId,v=t.delay,g=t.roomId;if(h&&l&&a&&p&&d){var m={};m.appId=a,m.thirdPartyUserId=l,m.accessToken=p,m.channelId=h,m.roomId=g||"",this.init(m).then((function(t){return r.connectMessageService()})).then((function(t){var n=new c.default({THIS:d,canvasBoxId:y,out:r.out,deferQueue:r.deferQueue,thirdPartyUserId:l,Permission:r.Permission});r.Enter=new u.Enter({socket:r.socket,channelId:h,THIS:d,DocMethods:n,delay:v,thirdPartyUserId:l}),e({message:f.default,Event:s.Event,ROLE_TYPE:s.ROLE_TYPE,docSdk:new o.Interface({mainThis:r,Out:r.out,DocMethods:n,deferQueue:r.deferQueue,thirdPartyUserId:l,Permission:r.Permission})})})).catch((function(t){i(t)}))}else i({code:"",message:"无效的参数",data:{}})}}]),d);t.exports={VhallDoc:y}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Base=void 0;function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i,o=n(6),s=n(7),a=(i=n(8))&&i.__esModule?i:{default:i};function c(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return n.third_party_user_id=t.thirdPartyUserId,n.channelId=t.channelId,n.pMsg=null,n.sMsg=null,n.out=e,n.request=e.request,n.initAPI=e.initAPI,n.sendAPI=e.sendAPI,n.events={msg:function(){}},n}e.Base=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,o.Store),function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(c,[{key:"dispatch",value:function(t){var e=void 0;try{e="string"==typeof t?JSON.parse(t):t}catch(t){return}try{"function"==typeof this.events[e.event]?this.events[e.event](e):"function"==typeof this.events[e.service_type]?this.events[e.service_type](e):this.events.msg(e)}catch(t){return}}},{key:"connectSocketIO",value:function(){var t=this,e={reconnection:!0,reconnectionAttempts:100,secure:!0,forceNew:!0,transports:["websocket"],rejectUnauthorized:!1,query:"token="+this.getKV("connection_token")};this.sMsg=(0,a.default)(this.getKV("socket_server"),e),this.sMsg.on("msg",(function(e){t.dispatch(e)})),this.sMsg.on("error",(function(t){})),this.sMsg.on("reconnecting",(function(t){})),this.sMsg.on("reconnect_failed",(function(t){})),this.sMsg.on("reconnect_error",(function(t){})),this.sMsg.on("reconnect_attempt",(function(t){})),this.sMsg.on("connect_error",(function(t){}))}},{key:"connectPushStream",value:function(){var t=this;this.pMsg=new s.pushStream({host:this.getKV("nginx_server"),useSSL:!0,messagesPublishedAfter:0,messagesControlByArgument:!0}),this.pMsg.addChannel(this.channelId),this.pMsg.connect((function(){}),(function(){})),this.pMsg.onmessage=function(e){t.dispatch(e)}}},{key:"init",value:function(t,e){var n=this;this.request(this.initAPI,{},(function(r){try{for(var i in r.data)n.setKV(i,r.data[i]);t()}catch(r){e(r)}}),(function(t){e(t)}))}},{key:"connect",value:function(t,e){var n=this;this.connectPushStream(),this.connectSocketIO(),this.sMsg.on("joined",(function(e){t(e),t=function(){}})),this.sMsg.on("reconnect",(function(t){n.join()})),this.pMsg.onreconnect=function(t){},this.pMsg.onreconnect_failed=function(t){},this.join()}},{key:"disconnect",value:function(){this.leave(),this.pMsg&&(this.pMsg.disconnect(),this.pMsg=null),this.sMsg&&(this.sMsg.disconnect(),this.sMsg=null)}},{key:"on",value:function(t,e){this.events[t]=e}},{key:"emit",value:function(t,e,n,r){var i=2<arguments.length&&void 0!==n?n:function(){},o=3<arguments.length&&void 0!==r?r:function(){},s={type:t,channel_id:this.channelId,body:"string"==typeof e?e:JSON.stringify(e)};this.request(this.sendAPI,s,(function(t){i(t)}),(function(t){o(t)}))}},{key:"join",value:function(){if(this.sMsg){var t={channel:this.channelId,third_party_user_id:this.third_party_user_id};this.sMsg.emit("join",t)}}},{key:"leave",value:function(){if(this.sMsg){var t={channel:this.channelId,third_party_user_id:this.third_party_user_id};this.sMsg.emit("leave",t)}}}]),c)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.info={}}e.Store=(function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(i,[{key:"setKV",value:function(t,e){this.info[t]=e}},{key:"getKV",value:function(t){return this.info[t]}},{key:"deleteKey",value:function(t){this.info.hasOwnProperty(t)&&delete this.info[t]}},{key:"reset",value:function(){this.info={}}},{key:"toString",value:function(){var t=this,e=Object.keys(this.info),n="";return e.forEach((function(e){n+=e+":"+t.info[e]+" "})),n}}]),i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t};function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=(i(h,null,[{key:"_isString",value:function(t){return"[object String]"===Object.prototype.toString.call(t)}},{key:"_valueToTwoDigits",value:function(t){return(t<10?"0":"")+t}},{key:"_trim",value:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}},{key:"_parseJSON",value:function(t){if(!t||!h._isString(t))return null;t=h._trim(t);try{return JSON.parse(t)}catch(e){throw"Invalid JSON: "+t}}},{key:"dateToUTCString",value:function(t){var e=h._valueToTwoDigits(t.getUTCHours())+":"+h._valueToTwoDigits(t.getUTCMinutes())+":"+h._valueToTwoDigits(t.getUTCSeconds());return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getUTCDay()]+", "+h._valueToTwoDigits(t.getUTCDate())+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getUTCMonth()]+" "+t.getUTCFullYear()+" "+e+" GMT"}},{key:"parseMessage",value:function(t,e){var n=t;return h._isString(t)&&(n=h._parseJSON(t)),{id:n[e.jsonIdKey],channel:n[e.jsonChannelKey],text:h._isString(n[e.jsonTextKey])?decodeURIComponent(n[e.jsonTextKey]):n[e.jsonTextKey],tag:n[e.jsonTagKey],time:n[e.jsonTimeKey],eventid:n[e.jsonEventIdKey]||""}}},{key:"linker",value:function(t,e){return function(){return t.apply(e,arguments)}}},{key:"isDate",value:function(t){return"[object Date]"===Object.prototype.toString.call(t)}}]),h);function h(){c(this,h)}var f=(a(l,u),i(l,[{key:"onMessageCallback",value:function(t){var e=u.parseMessage(t.data,this.pushStream);e.tag&&(this.pushStream._etag=e.tag),e.time&&(this.pushStream._lastModified=e.time),e.eventid&&(this.pushStream._lastEventId=e.eventid),this.pushStream._onMessage(e.text,e.id,e.channel,e.eventid,!0)}},{key:"onOpenCallback",value:function(){this.pushStream._onOpen()}},{key:"onErrorCallback",value:function(t){var e=this;this._closeCurrentConnection((function(){e.pushStream._onError({type:t&&("load"===t.errMsg||"close"===t.errMsg)||e.pushStream.readyState===e.pushStream.CONNECTING?"load":"timeout"})}))}},{key:"connect",value:function(t,e){var n=this;this._closeCurrentConnection((function(){var r=l._extend({},n.pushStream.extraParams(),l._currentTimestampParam(),l._getControlParams(n.pushStream)),i=l._getSubscriberUrl(n.pushStream,n.pushStream.urlPrefixWebsocket,r,!n.pushStream._useControlArguments());n.connection=wx.connectSocket({url:i,success:function(){},fail:function(){e()}}),n.connection.onError(u.linker(n.onErrorCallback,n)),n.connection.onClose(u.linker(n.onErrorCallback,n)),n.connection.onOpen((function(e){n.pushStream._onOpen(),t()})),n.connection.onMessage(u.linker(n.onMessageCallback,n))}))}},{key:"disconnect",value:function(t){var e=0<arguments.length&&void 0!==t?t:function(){};this.connection&&(this.connection.onclose=null,this._closeCurrentConnection(e),this.pushStream._onClose())}},{key:"_closeCurrentConnection",value:function(t){if(this.connection){try{this.connection.close({success:function(t){},fail:function(t){},complete:function(){t()}})}catch(t){}this.connection=null}else t()}},{key:"sendMessage",value:function(t,e,n){this.connection&&this.connection.send(t,e,n)}}],[{key:"_getTime",value:function(){return(new Date).getTime()}},{key:"_currentTimestampParam",value:function(){return{_:l._getTime()}}},{key:"_extend",value:function(t){for(var e=t||{},n=0;n<arguments.length;n++){var r=arguments[n];for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}},{key:"_normalizePort",value:function(t,e){return e=Number(e||(t?443:80)),!t&&80===e||t&&443===e?"":e}},{key:"_getControlParams",value:function(t){var e={};return e[t.tagArgument]="",e[t.timeArgument]="",e[t.eventIdArgument]="",t.messagesControlByArgument&&(e[t.tagArgument]=Number(t._etag),t._lastModified||t._lastEventId&&(e[t.eventIdArgument]=t._lastEventId)),e}},{key:"_getBacktrack",value:function(t){return t.backtrack?".b"+Number(t.backtrack):""}},{key:"_getChannelsPath",value:function(t,e){var n="";for(var r in t)t.hasOwnProperty(r)&&(n+="/"+r+(e?l._getBacktrack(t[r]):""));return n}},{key:"_objectToUrlParams",value:function(t){var e=t;if("object"===(void 0===t?"undefined":r(t))){for(var n in e="",t)t.hasOwnProperty(n)&&(e+="&"+n+"="+t[n]);e=e.substring(1)}return e||""}},{key:"_addParamsToUrl",value:function(t,e){return t+(t.indexOf("?")<0?"?":"&")+l._objectToUrlParams(e)}},{key:"_getSubscriberUrl",value:function(t,e,n,r){var i=t.useSSL,o=l._normalizePort(i,t.port),s=i?"wss://":"ws://";s+=t.host,s+=o?":"+o:"",s+=e;var a=l._getChannelsPath(t.channels,r);if(t.channelsByArgument){var c={};c[t.channelsArgument]=a.substring(1),n=l._extend({},n,c)}else s+=a;return l._addParamsToUrl(s,n)}}]),l);function l(t){c(this,l);var e=s(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return e.type="WebSocket",e.pushStream=t,e.connection=null,e}function p(t){c(this,p);var e=s(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));return e.settings=t,e.useSSL=t.useSSL||!1,e.host=t.host,-1!==e.host.indexOf("://")&&(e.host=e.host.substring(e.host.indexOf("://")+3)),e.port=Number(t.port||(e.useSSL?443:80)),e.reconnectOnTimeoutInterval=t.reconnectOnTimeoutInterval||3e3,e.lastEventId=t.lastEventId||null,e.messagesPublishedAfter=t.messagesPublishedAfter||0,e.messagesControlByArgument=t.messagesControlByArgument||!1,e.tagArgument=t.tagArgument||"tag",e.timeArgument=t.timeArgument||"time",e.eventIdArgument=t.eventIdArgument||"eventid",e._reconnecttimer=null,e._etag=0,e._lastModified=null,e._lastEventId=null,e.urlPrefixWebsocket=t.urlPrefixWebsocket||"/ws",e.jsonIdKey=t.jsonIdKey||"id",e.jsonChannelKey=t.jsonChannelKey||"channel",e.jsonTextKey=t.jsonTextKey||"text",e.jsonTagKey=t.jsonTagKey||"tag",e.jsonTimeKey=t.jsonTimeKey||"time",e.jsonEventIdKey=t.jsonEventIdKey||"eventid",e.wrapper=new f(e),e.onchanneldeleted=t.onchanneldeleted||null,e.onmessage=t.onmessage||null,e.onerror=t.onerror||null,e.onstatuschange=t.onstatuschange||null,e.extraParams=t.extraParams||function(){return{}},e.channels={},e.channelsCount=0,e.channelsByArgument=t.channelsByArgument||!1,e.channelsArgument=t.channelsArgument||"channels",e.readyState=0,e.CLOSED=0,e.CONNECTING=1,e.OPEN=2,e}e.pushStream=(a(p,u),i(p,[{key:"addChannel",value:function(t,e){if(void 0!==this.channels[t])throw"Cannot add channel "+t+": already subscribed";e=e||{},this.channels[t]=e,this.channelsCount++,this.readyState!==this.CLOSED&&this.connect()}},{key:"removeChannel",value:function(t){this.channels[t]&&(delete this.channels[t],this.channelsCount--)}},{key:"removeAllChannels",value:function(){this.channels={},this.channelsCount=0}},{key:"_setState",value:function(t){this.readyState!==t&&(this.readyState=t,this.onstatuschange&&this.onstatuschange(this.readyState))}},{key:"connect",value:function(t,e){var n=0<arguments.length&&void 0!==t?t:function(){},r=1<arguments.length&&void 0!==e?e:function(){};if(!this.host)throw"PushStream host not specified";if(isNaN(this.port))throw"PushStream port not specified";if(!this.channelsCount)throw"No channels specified";this._keepConnected=!0,this._lastUsedMode=0,this._connect(n,r)}},{key:"disconnect",value:function(){this._keepConnected=!1,this._disconnect(),this._setState(this.CLOSED)}},{key:"_useControlArguments",value:function(){return this.messagesControlByArgument&&(null!==this._lastModified||null!==this._lastEventId)}},{key:"_connect",value:function(t,e){if(null===this._lastEventId&&(this._lastEventId=this.lastEventId),null===this._lastModified){var n=this.messagesPublishedAfter;if(!u.isDate(n)){var r=Number(this.messagesPublishedAfter);0<r?(n=new Date).setTime(n.getTime()-1e3*r):r<0&&(n=new Date(0))}u.isDate(n)&&(this._lastModified=u.dateToUTCString(n))}this._disconnect(),this._setState(this.CONNECTING);try{this.wrapper.connect(t,e)}catch(t){this.wrapper&&this.wrapper.disconnect(),e()}}},{key:"_disconnect",value:function(){clearTimeout(this._reconnecttimer),this._reconnecttimer=null,this.wrapper&&this.wrapper.disconnect()}},{key:"_onOpen",value:function(){clearTimeout(this._reconnecttimer),this._reconnecttimer=null,this._setState(this.OPEN),0<this._lastUsedMode&&this._lastUsedMode--}},{key:"_onClose",value:function(){clearTimeout(this._reconnecttimer),this._reconnecttimer=null,this._setState(this.CLOSED),this._reconnect(this.reconnectOnTimeoutInterval)}},{key:"_onMessage",value:function(t,e,n,r,i){-2===e?this.onchanneldeleted&&this.onchanneldeleted(n):0<e&&this.onmessage&&this.onmessage(t,e,n,r,i)}},{key:"_onError",value:function(t){this._setState(this.CLOSED),this._reconnect(this.reconnectOnTimeoutInterval),this.onerror&&this.onerror(t)}},{key:"_reconnect",value:function(t){var e=this;this._keepConnected&&!this._reconnecttimer&&this.readyState!==this.CONNECTING&&(this._reconnecttimer=setTimeout(u.linker(this._connect,this),t,(function(){e.onreconnect&&e.onreconnect()}),(function(){e.onreconnect_failed&&e.onreconnect_failed()})))}},{key:"sendMessage",value:function(t,e,n){var r=1<arguments.length&&void 0!==e?e:function(){},i=2<arguments.length&&void 0!==n?n:function(){};this.wrapper.sendMessage(t,r,i)}}]),p)},function(t,e,n){"use strict";var r,i,o,s=function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t};function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!c[t])return n(9)(e);if(!c[t].status){var r={exports:{}};c[t].status=1,c[t].func(c[t].req,r,r.exports),"object"===u(r.exports)?(Object.keys(r.exports).forEach((function(e){c[t].m.exports[e]=r.exports[e]})),r.exports.__esModule&&Object.defineProperty(c[t].m.exports,"__esModule",{value:!0})):c[t].m.exports=r.exports}return c[t].m.exports}t.exports=((c={})[1555506639226]={status:0,func:function(t,e,n){var a;window,a=function(){return n={},t.m=e=[function(t,e){t.exports=function(){return function(){}}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==("undefined"==typeof window?"undefined":u(window))&&(n=window)}t.exports=n},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}(t.exports=r).prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){var r=n(0)("socket.io-parser"),i=n(3),o=n(20),s=n(2),a=n(9);function c(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=c,e.Decoder=f;var u=e.ERROR+'"encode error"';function h(t){var n=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data){var i=function(t){try{return JSON.stringify(t)}catch(t){return!1}}(t.data);if(!1===i)return u;n+=i}return r("encoded %j as %s",t,n),n}function f(){this.reconstructor=null}function l(t){this.reconPack=t,this.buffers=[]}function p(t){return{type:e.ERROR,data:"parser error: "+t}}c.prototype.encode=function(t,n){var i,s;r("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type?(i=t,s=n,o.removeBlobs(i,(function(t){var e=o.deconstructPacket(t),n=h(e.packet),r=e.buffers;r.unshift(n),s(r)}))):n([h(t)])},i(f.prototype),f.prototype.add=function(t){var n;if("string"==typeof t)n=function(t){var n=0,i={type:Number(t.charAt(0))};if(null==e.types[i.type])return p("unknown packet type "+i.type);if(e.BINARY_EVENT===i.type||e.BINARY_ACK===i.type){for(var o="";"-"!==t.charAt(++n)&&(o+=t.charAt(n),n!=t.length););if(o!=Number(o)||"-"!==t.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(o)}if("/"===t.charAt(n+1))for(i.nsp="";++n&&","!==(c=t.charAt(n))&&(i.nsp+=c,n!==t.length););else i.nsp="/";var a=t.charAt(n+1);if(""!==a&&Number(a)==a){for(i.id="";++n;){var c;if(null==(c=t.charAt(n))||Number(c)!=c){--n;break}if(i.id+=t.charAt(n),n===t.length)break}i.id=Number(i.id)}if(t.charAt(++n)){var u=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(n));if(!1===u||i.type!==e.ERROR&&!s(u))return p("invalid payload");i.data=u}return r("decoded %s as %j",t,i),i}(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new l(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!a(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length!==this.reconPack.attachments)return null;var e=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},function(t,e){t.exports=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}},function(t,e,n){var r=n(4),i=n(3),o=n(18),s=n(6),a=n(5),c=n(0)("socket.io-client:socket"),h=n(17),f=n(16);t.exports=d;var l={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=i.prototype.emit;function d(t,e,n){this.io=t,this.nsp=e,(this.json=this).ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}i(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[s(t,"open",a(this,"onopen")),s(t,"packet",a(this,"onpacket")),s(t,"close",a(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},d.prototype.send=function(){var t=o(arguments);return t.unshift("message"),this.emit.apply(this,t),this},d.prototype.emit=function(t){if(l.hasOwnProperty(t))return p.apply(this,arguments),this;var e=o(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:f(e))?r.BINARY_EVENT:r.EVENT,data:e,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},d.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},d.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==u(this.query)?h.encode(this.query):this.query;c("sending connect packet with query %s",t),this.packet({type:r.CONNECT,query:t})}else this.packet({type:r.CONNECT})},d.prototype.onclose=function(t){c("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},d.prototype.onpacket=function(t){var e=t.nsp===this.nsp,n=t.type===r.ERROR&&"/"===t.nsp;if(e||n)switch(t.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(t);break;case r.ACK:case r.BINARY_ACK:this.onack(t);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",t.data)}},d.prototype.onevent=function(t){var e=t.data||[];c("emitting event %j",e),null!=t.id&&(c("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},d.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var i=o(arguments);c("sending ack %j",i),e.packet({type:f(i)?r.BINARY_ACK:r.ACK,id:t,data:i})}}},d.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(c("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):c("bad ack %s",t.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(t){return this.flags.compress=t,this},d.prototype.binary=function(t){return this.flags.binary=t,this}},function(t,e,n){var r=n(19),i=n(7),o=n(3),s=n(4),a=n(6),c=n(5),h=n(0)("socket.io-client:manager"),f=n(11),l=n(10),p=Object.prototype.hasOwnProperty;function d(t,e){if(!(this instanceof d))return new d(t,e);t&&"object"==(void 0===t?"undefined":u(t))&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||s;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}(t.exports=d).prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},d.prototype.updateSocketIds=function(){for(var t in this.nsps)p.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},d.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},o(d.prototype),d.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},d.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},d.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(t,e){if(h("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;h("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=a(n,"open",(function(){i.onopen(),t&&t()})),s=a(n,"error",(function(e){if(h("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;h("connect attempt will timeout after %d",c);var u=setTimeout((function(){h("connect attempt timed out after %d",c),o.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(o),this.subs.push(s),this},d.prototype.onopen=function(){h("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(a(t,"data",c(this,"ondata"))),this.subs.push(a(t,"ping",c(this,"onping"))),this.subs.push(a(t,"pong",c(this,"onpong"))),this.subs.push(a(t,"error",c(this,"onerror"))),this.subs.push(a(t,"close",c(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",c(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(t){this.decoder.add(t)},d.prototype.ondecoded=function(t){this.emit("packet",t)},d.prototype.onerror=function(t){h("error",t),this.emitAll("error",t)},d.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new i(this,t,e),this.nsps[t]=n;var r=this;n.on("connecting",o),n.on("connect",(function(){n.id=r.generateId(t)})),this.autoConnect&&o()}function o(){~f(r.connecting,n)||r.connecting.push(n)}return n},d.prototype.destroy=function(t){var e=f(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},d.prototype.packet=function(t){h("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,(function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()})))},d.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},d.prototype.cleanup=function(){h("cleanup");for(var t=this.subs.length,e=0;e<t;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){h("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(t){h("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)h("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();h("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout((function(){t.skipReconnect||(h("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open((function(e){e?(h("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(h("reconnect success"),t.onreconnect())})))}),e);this.subs.push({destroy:function(){clearTimeout(n)}})}},d.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,n){(function(e){t.exports=function(t){return n&&e.Buffer.isBuffer(t)||r&&(t instanceof e.ArrayBuffer||i(t))};var n="function"==typeof e.Buffer&&"function"==typeof e.Buffer.isBuffer,r="function"==typeof e.ArrayBuffer,i=r&&"function"==typeof e.ArrayBuffer.isView?e.ArrayBuffer.isView:function(t){return t.buffer instanceof e.ArrayBuffer}}).call(this,n(1))},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=0<t.jitter&&t.jitter<=1?t.jitter:0,this.attempts=0}(t.exports=n).prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,h=-7,f=n?i-1:0,l=n?-1:1,p=t[e+f];for(f+=l,o=p&(1<<-h)-1,p>>=-h,h+=a;0<h;o=256*o+t[e+f],f+=l,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;0<h;s=256*s+t[e+f],f+=l,h-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=u}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,c,u=8*o-i-1,h=(1<<u)-1,f=h>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),2<=(e+=1<=s+f?l/c:l*Math.pow(2,1-f))*c&&(s++,c/=2),h<=s+f?(a=0,s=h):1<=s+f?(a=(e*c-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));8<=i;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;t[n+p]=255&s,p+=d,s/=256,u-=8);t[n+p-d]|=128*y}},function(t,e,n){e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=u(t),r=n[0],s=n[1],a=new o(3*(r+s)/4-s),c=0,h=0<s?r-4:r,f=0;f<h;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],a[c++]=e>>16&255,a[c++]=e>>8&255,a[c++]=255&e;return 2===s&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,a[c++]=255&e),1===s&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,a[c++]=e>>8&255,a[c++]=255&e),a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(h(t,s,a<s+16383?a:s+16383));return 1==i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2==i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function u(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function h(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e,n){(function(t){var r=n(14),i=n(13),o=n(12);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"!=typeof t)return u(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=l(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=a(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):l(t,e);if("Buffer"===e.type&&o(e.data))return l(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(h(e),t=a(t,e<0?0:0|p(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(t).length;default:if(r)return B(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,s=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a/=s=2,c/=2,n/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=n;o<a;o++)if(u(t,o)===u(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===c)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(a<n+c&&(n=a-c),o=n;0<=o;o--){for(var f=!0,l=0;l<c;l++)if(u(t,o+l)!==u(e,l)){f=!1;break}if(f)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<r&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function b(t,e,n,r){return L(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,c,u=t[i],h=null,f=239<u?4:223<u?3:191<u?2:1;if(i+f<=n)switch(f){case 1:u<128&&(h=u);break;case 2:128==(192&(o=t[i+1]))&&127<(c=(31&u)<<6|63&o)&&(h=c);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&2047<(c=(15&u)<<12|(63&o)<<6|63&s)&&(c<55296||57343<c)&&(h=c);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)&&c<1114112&&(h=c)}null===h?(h=65533,f=1):65535<h&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=f}return function(t){var e=t.length;if(e<=_)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=_));return n}(r)}e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return u(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return i=e,o=n,h(r=t),r<=0?a(null,r):void 0!==i?"string"==typeof o?a(null,r).fill(i,o):a(null,r).fill(i):a(null,r);var r,i,o},c.allocUnsafe=function(t){return f(null,t)},c.allocUnsafeSlow=function(t){return f(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?w(this,0,t):function(t,e,n){var i,o,s,a=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return w(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return i=this,s=n,0===(o=e)&&s===i.length?r.fromByteArray(i):r.fromByteArray(i.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,n);default:if(a)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(r,i),h=t.slice(e,n),f=0;f<a;++f)if(u[f]!==h[f]){o=u[f],s=h[f];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i,o,s,a,c,u,h=this.length-e;if((void 0===n||h<n)&&(n=h),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var f=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return c=e,u=n,L(B(t,this.length-c),this,c,u);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return b(this,t,e,n);case"base64":return this,s=e,a=n,L(N(t),this,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i=e,o=n,L(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,this.length-i),this,i,o);default:if(f)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function k(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r,i=t.length;(!e||e<0)&&(e=0),(!n||n<0||i<n)&&(n=i);for(var o="",s=e;s<n;++s)o+=(r=t[s])<16?"0"+r.toString(16):r.toString(16);return o}function A(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function T(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function S(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function C(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function O(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function I(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,r,o){return o||I(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function R(t,e,n,r,o){return o||I(t,0,n,8),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||T(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||T(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||T(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=e,i=1,o=this[t+--r];0<r&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||T(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||T(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||T(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||T(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||T(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||T(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||S(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||S(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);S(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);S(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;0<=--o&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return R(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return R(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),e=e||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;0<=i;--i)t[i+e]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(o=e;o<n;++o)this[o]=t;else{var s=c.isBuffer(t)?t:B(new c(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var x=/[^+\/0-9A-Za-z-_]/g;function B(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=t.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function N(t){return r.toByteArray(function(t){if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(x,"")).length<2)return"";for(var e;t.length%4!=0;)t+="=";return t}(t))}function L(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(1))},function(t,e,n){(function(e){var r=n(2),i=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);t.exports=function t(n){if(!n||"object"!=(void 0===n?"undefined":u(n)))return!1;if(r(n)){for(var i=0,a=n.length;i<a;i++)if(t(n[i]))return!0;return!1}if("function"==typeof e&&e.isBuffer&&e.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||o&&n instanceof Blob||s&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return t(n.toJSON(),!0);for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)&&t(n[c]))return!0;return!1}}).call(this,n(15).Buffer)},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},function(t,e){t.exports=function(t,e){for(var n=[],r=(e=e||0)||0;r<t.length;r++)n[r-e]=t[r];return n}},function(t,e,n){function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var i,o;window,t.exports=(o={},r.m=i=[function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==("undefined"==typeof window?"undefined":u(window))&&(n=window)}t.exports=n},function(t,e,n){(function(t){var r,i=n(26),o=n(25),s=n(19),a=n(18),c=n(17);t&&t.ArrayBuffer&&(r=n(15));var u="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),h="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=u||h;e.protocol=3;var l=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=i(l),d={type:"error",data:"parser error"},y=n(14);function v(t,e,n){for(var r=new Array(t.length),i=a(t.length,n),o=function(t,n,i){e(n,(function(e,n){r[t]=n,i(e,r)}))},s=0;s<t.length;s++)o(s,t[s],i)}e.encodePacket=function(n,r,i,o){"function"==typeof r&&(o=r,r=!1),"function"==typeof i&&(o=i,i=null);var s,a=void 0===n.data?void 0:n.data.buffer||n.data;if(t.ArrayBuffer&&a instanceof ArrayBuffer)return function(t,n,i){if(!r)return e.encodeBase64Packet(t,i);var o=t.data,s=new Uint8Array(o),a=new Uint8Array(1+o.byteLength);a[0]=l[t.type];for(var c=0;c<s.length;c++)a[c+1]=s[c];return i(a.buffer)}(n,0,o);if(y&&a instanceof t.Blob)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(f)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var i=new FileReader;return i.onload=function(){t.data=i.result,e.encodePacket(t,n,!0,r)},i.readAsArrayBuffer(t.data)}(t,n,r);var i=new Uint8Array(1);return i[0]=l[t.type],r(new y([i.buffer,t.data]))}(n,r,o);if(a&&a.base64)return s=n,o("b"+e.packets[s.type]+s.data.data);var u=l[n.type];return void 0!==n.data&&(u+=i?c.encode(String(n.data),{strict:!1}):String(n.data)),o(""+u)},e.encodeBase64Packet=function(n,r){var i,o="b"+e.packets[n.type];if(y&&n.data instanceof t.Blob){var s=new FileReader;return s.onload=function(){var t=s.result.split(",")[1];r(o+t)},s.readAsDataURL(n.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(t){for(var a=new Uint8Array(n.data),c=new Array(a.length),u=0;u<a.length;u++)c[u]=a[u];i=String.fromCharCode.apply(null,c)}return o+=t.btoa(i),r(o)},e.decodePacket=function(t,n,r){if(void 0===t)return d;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(r&&!1===(t=function(t){try{t=c.decode(t,{strict:!1})}catch(t){return!1}return t}(t)))return d;var i=t.charAt(0);return Number(i)==i&&p[i]?1<t.length?{type:p[i],data:t.substring(1)}:{type:p[i]}:d}i=new Uint8Array(t)[0];var o=s(t,1);return y&&"blob"===n&&(o=new y([o])),{type:p[i],data:o}},e.decodeBase64Packet=function(t,e){var n=p[t.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:t.substr(1)}};var i=r.decode(t.substr(1));return"blob"===e&&y&&(i=new y([i])),{type:n,data:i}},e.encodePayload=function(t,n,r){"function"==typeof n&&(r=n,n=null);var i=o(t);return n&&i?y&&!f?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r):t.length?void v(t,(function(t,r){e.encodePacket(t,!!i&&n,!1,(function(t){var e;r(null,(e=t).length+":"+e)}))}),(function(t,e){return r(e.join(""))})):r("0:")},e.decodePayload=function(t,n,r){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,r);var i;if("function"==typeof n&&(r=n,n=null),""===t)return r(d,0,1);for(var o,s,a="",c=0,u=t.length;c<u;c++){var h=t.charAt(c);if(":"===h){if(""===a||a!=(o=Number(a)))return r(d,0,1);if(a!=(s=t.substr(c+1,o)).length)return r(d,0,1);if(s.length){if(i=e.decodePacket(s,n,!1),d.type===i.type&&d.data===i.data)return r(d,0,1);if(!1===r(i,c+o,u))return}c+=o,a=""}else a+=h}return""!==a?r(d,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){if(!t.length)return n(new ArrayBuffer(0));v(t,(function(t,n){e.encodePacket(t,!0,!0,(function(t){return n(null,t)}))}),(function(t,e){var r=e.reduce((function(t,e){var n;return t+(n="string"==typeof e?e.length:e.byteLength).toString().length+n+2}),0),i=new Uint8Array(r),o=0;return e.forEach((function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);n=r.buffer}i[o++]=e?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)i[o++]=parseInt(a[s]);for(i[o++]=255,r=new Uint8Array(n),s=0;s<r.length;s++)i[o++]=r[s]})),n(i.buffer)}))},e.encodePayloadAsBlob=function(t,n){v(t,(function(t,n){e.encodePacket(t,!0,!0,(function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);t=r.buffer,e[0]=0}var o=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),s=new Uint8Array(o.length+1);for(i=0;i<o.length;i++)s[i]=parseInt(o[i]);if(s[o.length]=255,y){var a=new y([e.buffer,s.buffer,t]);n(null,a)}}))}),(function(t,e){return n(new y(e))}))},e.decodePayloadAsBinary=function(t,n,r){"function"==typeof n&&(r=n,n=null);for(var i=t,o=[];0<i.byteLength;){for(var a=new Uint8Array(i),c=0===a[0],u="",h=1;255!==a[h];h++){if(310<u.length)return r(d,0,1);u+=a[h]}i=s(i,2+u.length),u=parseInt(u);var f=s(i,0,u);if(c)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(t){var l=new Uint8Array(f);for(f="",h=0;h<l.length;h++)f+=String.fromCharCode(l[h])}o.push(f),i=s(i,u)}var p=o.length;o.forEach((function(t,i){r(e.decodePacket(t,n,!0),i,p)}))}}).call(this,n(0))},function(t,e){t.exports=function(){return function(){}}},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}(t.exports=r).prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){var r=n(1);function i(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}n(4)((t.exports=i).prototype),i.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(t){var e=r.decodePacket(t,this.socket.binaryType);this.onPacket(e)},i.prototype.onPacket=function(t){this.emit("packet",t)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,n){var r=n(27);e.websocket=r},function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,i=t.indexOf("["),o=t.indexOf("]");-1!=i&&-1!=o&&(t=t.substring(0,i)+t.substring(i,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=n.exec(t||""),a={},c=14;c--;)a[r[c]]=s[c]||"";return-1!=i&&-1!=o&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e,n){function r(t,e){l(this,r),this.target=e,this.type=t}var i=(f(o,r),o);function o(t,e){var n;return l(this,o),(n=h(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,"message",e))).data=t,n}var s=(f(a,r),a);function a(t,e,n){var r;return l(this,a),(r=h(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,"close",n))).wasClean=n._closeFrameReceived&&n._closeFrameSent,r.reason=e,r.code=t,r}var c=(f(u,r),u);function u(t){return l(this,u),h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,"open",t))}var p=(f(d,r),d);function d(t,e){var n;return l(this,d),(n=h(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,"error",e))).message=t.message,n.error=t,n}var y={addEventListener:function(t,e){function n(t){e.call(this,new i(t,this))}function r(t,n){e.call(this,new s(t,n,this))}function o(t){e.call(this,new p(t,this))}function a(){e.call(this,new c(this))}"function"==typeof e&&("message"===t?(n._listener=e,this.on(t,n)):"close"===t?(r._listener=e,this.on(t,r)):"error"===t?(o._listener=e,this.on(t,o)):"open"===t?(a._listener=e,this.on(t,a)):this.on(t,e))},removeEventListener:function(t,e){for(var n=this.listeners(t),r=0;r<n.length;r++)n[r]!==e&&n[r]._listener!==e||this.removeListener(t,n[r])}};t.exports=y},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"object"==(void 0===t?"undefined":u(t))&&null!==t}function o(t){return void 0===t}((t.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,s,a,c,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(o(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),s=(u=n.slice()).length,c=0;c<s;c++)u[c].apply(this,a);return!0},n.prototype.on=n.prototype.addListener=function(t,e){var s;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&0<s&&this._events[t].length>s&&(this._events[t].warned=!0,console.trace),this},n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,o,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(a=s;0<a--;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){var r=n(10),i=n(9),o=n(2)("weapp-socket:"),a=["CONNECTING","OPEN","CLOSING","CLOSED"],c=(f(p,r),s(p,[{key:"addSocketEventListeners",value:function(){var t=this;this._socket.onOpen((function(){t.readyState=p.OPEN,t.onopen()})),this._socket.onClose((function(e){o("onclose: ",e),t.readyState=p.CLOSED,t.onclose(e.code,e.reason)})),this._socket.onError((function(e){o("onerror: ",e),t.onerror(e)})),this._socket.onMessage((function(e){t.onmessage(e)}))}},{key:"send",value:function(t){o("send data: ",t,this.readyState),this.readyState===p.OPEN&&this._socket.send({data:t})}},{key:"close",value:function(t,e){o("close socket: ",t,e),this.readyState=p.CLOSING,this._socket.close({code:t,reason:e})}},{key:"CONNECTING",get:function(){return p.CONNECTING}},{key:"CLOSING",get:function(){return p.CLOSING}},{key:"CLOSED",get:function(){return p.CLOSED}},{key:"OPEN",get:function(){return p.OPEN}}]),p);function p(t,e,n){var r;return l(this,p),(r=h(this,(p.__proto__||Object.getPrototypeOf(p)).call(this))).readyState=p.CONNECTING,r.protocol="",(r._socket=null)!==t&&(Array.isArray(e)?e=e.join(", "):"object"==(void 0===e?"undefined":u(e))&&null!==e&&(n=e,e=void 0),function(t,e,n){var r,i;Object.assign(n,{url:t,header:{"content-type":"application/json"},protocols:e,method:"GET"}),this._socket=(r=n,i=wx.connectSocket(r),o("socketTask: ",i),i||{onClose:wx.onSocketClose,onOpen:wx.onSocketOpen,onError:wx.onSocketError,onMessage:wx.onSocketMessage,send:wx.sendSocketMessage,close:wx.closeSocket}),this.addSocketEventListeners()}.call(r,t,e,n)),r}a.forEach((function(t,e){c[a[e]]=e})),["open","error","close","message"].forEach((function(t){Object.defineProperty(c.prototype,"on"+t,{get:function(){for(var e=this.listeners(t),n=0;n<e.length;n++)if(e[n]._listener)return e[n]._listener},set:function(e){for(var n=this.listeners(t),r=0;r<n.length;r++)n[r]._listener&&this.removeListener(t,n[r]);this.addEventListener(t,e)}})})),c.prototype.addEventListener=i.addEventListener,c.prototype.removeEventListener=i.removeEventListener,t.exports=c},function(t,e,n){var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,s={},a=0,c=0;function u(t){for(var e="";e=i[t%o]+e,0<(t=Math.floor(t/o)););return e}function h(){var t=u(+new Date);return t!==r?(a=0,r=t):t+"."+u(a++)}for(;c<o;c++)s[i[c]]=c;h.encode=u,h.decode=function(t){var e=0;for(c=0;c<t.length;c++)e=e*o+s[t.charAt(c)];return e},t.exports=h},function(t,e){t.exports=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(e){var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;function s(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}t[e]=r}}}t.exports=r?i?e.Blob:function(t,e){return s(t),new Blob(t,e||{})}:o?function(t,e){e=e||{};var r=new n;s(t);for(var i=0;i<t.length;i++)r.append(t[i]);return e.type?r.getBlob(e.type):r.getBlob()}:void 0}).call(this,n(0))},function(t,e){!function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),i=r.length,o="";for(n=0;n<i;n+=3)o+=t[r[n]>>2],o+=t[(3&r[n])<<4|r[n+1]>>4],o+=t[(15&r[n+1])<<2|r[n+2]>>6],o+=t[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},e.decode=function(t){var e,r,i,o,s,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var h=new ArrayBuffer(a),f=new Uint8Array(h);for(e=0;e<c;e+=4)r=n[t.charCodeAt(e)],i=n[t.charCodeAt(e+1)],o=n[t.charCodeAt(e+2)],s=n[t.charCodeAt(e+3)],f[u++]=r<<2|i>>4,f[u++]=(15&i)<<4|o>>2,f[u++]=(3&o)<<6|63&s;return h}}()},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){(function(t,r){var i;!function(){var o=("object"==(void 0===t?"undefined":u(t))&&t&&t.exports,"object"==(void 0===r?"undefined":u(r))&&r);o.global!==o&&o.window;var s,a,c,h=String.fromCharCode;function f(t){for(var e,n,r=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function l(t,e){if(55296<=t&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function p(t,e){return h(t>>e&63|128)}function d(t,e){if(0==(4294967168&t))return h(t);var n="";return 0==(4294965248&t)?n=h(t>>6&31|192):0==(4294901760&t)?(l(t,e)||(t=65533),n=h(t>>12&15|224),n+=p(t,6)):0==(4292870144&t)&&(n=h(t>>18&7|240),n+=p(t,12),n+=p(t,6)),n+h(63&t|128)}function y(){if(a<=c)throw Error("Invalid byte index");var t=255&s[c];if(c++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function v(t){var e,n;if(a<c)throw Error("Invalid byte index");if(c==a)return!1;if(e=255&s[c],c++,0==(128&e))return e;if(192==(224&e)){if(128<=(n=(31&e)<<6|y()))return n;throw Error("Invalid continuation byte")}if(224==(240&e)){if(2048<=(n=(15&e)<<12|y()<<6|y()))return l(n,t)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&65536<=(n=(7&e)<<18|y()<<12|y()<<6|y())&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}var g={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,r=f(t),i=r.length,o=-1,s="";++o<i;)s+=d(r[o],n);return s},decode:function(t,e){var n=!1!==(e=e||{}).strict;s=f(t),a=s.length,c=0;for(var r,i=[];!1!==(r=v(n));)i.push(r);return function(t){for(var e,n=t.length,r=-1,i="";++r<n;)65535<(e=t[r])&&(i+=h((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=h(e);return i}(i)}};void 0===(i=function(){return g}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(16)(t),n(0))},function(t,e){function n(){}t.exports=function(t,e,r){var i=!1;return r=r||n,0===(o.count=t)?e():o;function o(t,n){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,e(t),e=r):0!==o.count||i||e(null,n)}}},function(t,e){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),r<n&&(n=r),r<=e||n<=e||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)o[a]=i[s];return o.buffer}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,h=-7,f=n?i-1:0,l=n?-1:1,p=t[e+f];for(f+=l,o=p&(1<<-h)-1,p>>=-h,h+=a;0<h;o=256*o+t[e+f],f+=l,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;0<h;s=256*s+t[e+f],f+=l,h-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=u}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,c,u=8*o-i-1,h=(1<<u)-1,f=h>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),2<=(e+=1<=s+f?l/c:l*Math.pow(2,1-f))*c&&(s++,c/=2),h<=s+f?(a=0,s=h):1<=s+f?(a=(e*c-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));8<=i;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;t[n+p]=255&s,p+=d,s/=256,u-=8);t[n+p-d]|=128*y}},function(t,e,n){e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=u(t),r=n[0],s=n[1],a=new o(NaN),c=0,h=0<s?r-4:r,f=0;f<h;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],a[c++]=e>>16&255,a[c++]=e>>8&255,a[c++]=255&e;return 2===s&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,a[c++]=255&e),1===s&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,a[c++]=e>>8&255,a[c++]=255&e),a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(h(t,s,a<s+16383?a:s+16383));return 1==i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2==i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function u(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function h(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e,n){(function(t){var r=n(23),i=n(22),o=n(21);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"!=typeof t)return u(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=l(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=a(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):l(t,e);if("Buffer"===e.type&&o(e.data))return l(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(h(e),t=a(t,e<0?0:0|p(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(t).length;default:if(r)return B(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,s=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a/=s=2,c/=2,n/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=n;o<a;o++)if(u(t,o)===u(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===c)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(a<n+c&&(n=a-c),o=n;0<=o;o--){for(var f=!0,l=0;l<c;l++)if(u(t,o+l)!==u(e,l)){f=!1;break}if(f)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<r&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function b(t,e,n,r){return L(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,c,u=t[i],h=null,f=239<u?4:223<u?3:191<u?2:1;if(i+f<=n)switch(f){case 1:u<128&&(h=u);break;case 2:128==(192&(o=t[i+1]))&&127<(c=(31&u)<<6|63&o)&&(h=c);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&2047<(c=(15&u)<<12|(63&o)<<6|63&s)&&(c<55296||57343<c)&&(h=c);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)&&c<1114112&&(h=c)}null===h?(h=65533,f=1):65535<h&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=f}return function(t){var e=t.length;if(e<=_)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=_));return n}(r)}e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return u(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return i=e,o=n,h(r=t),r<=0?a(null,r):void 0!==i?"string"==typeof o?a(null,r).fill(i,o):a(null,r).fill(i):a(null,r);var r,i,o},c.allocUnsafe=function(t){return f(null,t)},c.allocUnsafeSlow=function(t){return f(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?w(this,0,t):function(t,e,n){var i,o,s,a=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return w(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return i=this,s=n,0===(o=e)&&s===i.length?r.fromByteArray(i):r.fromByteArray(i.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,n);default:if(a)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(r,i),h=t.slice(e,n),f=0;f<a;++f)if(u[f]!==h[f]){o=u[f],s=h[f];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i,o,s,a,c,u,h=this.length-e;if((void 0===n||h<n)&&(n=h),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var f=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return c=e,u=n,L(B(t,this.length-c),this,c,u);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return b(this,t,e,n);case"base64":return this,s=e,a=n,L(N(t),this,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i=e,o=n,L(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,this.length-i),this,i,o);default:if(f)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function k(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r,i=t.length;(!e||e<0)&&(e=0),(!n||n<0||i<n)&&(n=i);for(var o="",s=e;s<n;++s)o+=(r=t[s])<16?"0"+r.toString(16):r.toString(16);return o}function A(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function T(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function S(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function C(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function O(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function I(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,r,o){return o||I(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function R(t,e,n,r,o){return o||I(t,0,n,8),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||T(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||T(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||T(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=e,i=1,o=this[t+--r];0<r&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||T(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||T(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||T(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||T(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||T(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||T(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||S(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||S(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);S(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);S(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;0<=--o&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return R(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return R(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),e=e||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;0<=i;--i)t[i+e]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(o=e;o<n;++o)this[o]=t;else{var s=c.isBuffer(t)?t:B(new c(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var x=/[^+\/0-9A-Za-z-_]/g;function B(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=t.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function N(t){return r.toByteArray(function(t){if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(x,"")).length<2)return"";for(var e;t.length%4!=0;)t+="=";return t}(t))}function L(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(0))},function(t,e,n){(function(e){var r=n(20),i=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);t.exports=function t(n){if(!n||"object"!=(void 0===n?"undefined":u(n)))return!1;if(r(n)){for(var i=0,a=n.length;i<a;i++)if(t(n[i]))return!0;return!1}if("function"==typeof e&&e.isBuffer&&e.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||o&&n instanceof Blob||s&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return t(n.toJSON(),!0);for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)&&t(n[c]))return!0;return!1}}).call(this,n(24).Buffer)},function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},function(t,e,n){(function(e){var r,i=n(5),o=n(1),s=n(3),a=n(13),c=n(12),u=n(2)("engine.io-client:websocket"),h=e.WebSocket||e.MozWebSocket;if("undefined"==typeof window)try{r=n(11)}catch(e){u("require error: ",e)}var f=h;function l(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=h&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(f=r),i.call(this,t)}f||"undefined"!=typeof window||(f=r),a(t.exports=l,i),l.prototype.name="websocket",l.prototype.supportsBinary=!0,l.prototype.doOpen=function(){if(u("wesocket do open: ",this.protocols),this.check()){var t=this.uri(),e=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new f(t,e):new f(t):new f(t,e,n)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},l.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},l.prototype.write=function(t){var e=this;this.writable=!1;for(var n,r=t.length,i=0,s=r;i<s;i++)n=t[i],o.encodePacket(n,e.supportsBinary,(function(t){try{e.ws.send(t)}catch(t){}--r||(e.emit("flush"),setTimeout((function(){e.writable=!0,e.emit("drain")}),0))}))},l.prototype.onClose=function(){i.prototype.onClose.call(this)},l.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},l.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"==e&&443!==Number(this.port)||"ws"==e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||(t.b64=1),(t=s.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},l.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===l.prototype.name)}}).call(this,n(0))},function(t,e,n){(function(e){var r=n(6),i=n(4),o=n(2)("engine.io-client:socket"),s=n(8),a=n(1),c=n(7),h=n(3);function f(t,n){if(!(this instanceof f))return new f(t,n);n=n||{},t&&"object"==(void 0===t?"undefined":u(t))&&(n=t,t=null),t?(t=c(t),n.hostname=t.host,n.secure="https"===t.protocol||"wss"===t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=c(n.host).host),this.secure=null!=n.secure?n.secure:e.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(e.location?location.hostname:"localhost"),this.port=n.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=h.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["websocket"],this.transportOptions=n.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized||n.rejectUnauthorized,this.forceNode=!!n.forceNode;var r="object"==(void 0===e?"undefined":u(e))&&e;r.global===r&&(n.extraHeaders&&0<Object.keys(n.extraHeaders).length&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}(t.exports=f).priorWebsocketSuccess=!1,i(f.prototype),f.protocol=a.protocol,(f.Socket=f).Transport=n(5),f.transports=n(6),f.parser=n(1),f.prototype.createTransport=function(t){o('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.query);e.EIO=a.protocol,e.transport=t;var n=this.transportOptions[t]||{};this.id&&(e.sid=this.id);var i=new r[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0});return o("transport: ",i),i},f.prototype.open=function(){var t;if(this.rememberUpgrade&&f.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout((function(){e.emit("error","No transports available")}),0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},f.prototype.setTransport=function(t){o("setting transport %s",t.name);var e=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=t).on("drain",(function(){e.onDrain()})).on("packet",(function(t){e.onPacket(t)})).on("error",(function(t){e.onError(t)})).on("close",(function(){e.onClose("transport close")}))},f.prototype.probe=function(t){o('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,r=this;function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(o('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(o('probe transport "%s" pong',t),r.upgrading=!0,r.emit("upgrading",e),!e)return;f.priorWebsocketSuccess="websocket"===e.name,o('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(o("changing transport and sending upgrade packet"),l(),r.setTransport(e),e.send([{type:"upgrade"}]),r.emit("upgrade",e),e=null,r.upgrading=!1,r.flush())}))}else{o('probe transport "%s" failed',t);var s=new Error("probe error");s.transport=e.name,r.emit("upgradeError",s)}})))}function s(){n||(n=!0,l(),e.close(),e=null)}function a(n){var i=new Error("probe error: "+n);i.transport=e.name,s(),o('probe transport "%s" failed because of error: %s',t,n),r.emit("upgradeError",i)}function c(){a("transport closed")}function u(){a("socket closed")}function h(t){e&&t.name!==e.name&&(o('"%s" works - aborting "%s"',t.name,e.name),s())}function l(){e.removeListener("open",i),e.removeListener("error",a),e.removeListener("close",c),r.removeListener("close",u),r.removeListener("upgrading",h)}f.priorWebsocketSuccess=!1,e.once("open",i),e.once("error",a),e.once("close",c),this.once("close",u),this.once("upgrading",h),e.open()},f.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",f.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},f.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else o('packet received with socket readyState "%s"',this.readyState)},f.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},f.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout((function(){"closed"!==e.readyState&&e.onClose("ping timeout")}),t||e.pingInterval+e.pingTimeout)},f.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout((function(){o("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)}),t.pingInterval)},f.prototype.ping=function(){var t=this;this.sendPacket("ping",(function(){t.emit("ping")}))},f.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emit("drain"):this.flush()},f.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},f.prototype.write=f.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},f.prototype.sendPacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},f.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():e()})):this.upgrading?r():e()}function e(){t.onClose("forced close"),o("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function r(){t.once("upgrade",n),t.once("upgradeError",n)}return this},f.prototype.onError=function(t){o("socket error %j",t),f.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},f.prototype.onClose=function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(o('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)},f.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~s(this.transports,t[n])&&e.push(t[n]);return e}}).call(this,n(0))},function(t,e,n){t.exports=n(28),t.exports.parser=n(1)}],r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==(void 0===t?"undefined":u(t))&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=29))},function(t,e,n){(function(t){var r=n(2),i=n(9),o=Object.prototype.toString,s="function"==typeof t.Blob||"[object BlobConstructor]"===o.call(t.Blob),a="function"==typeof t.File||"[object FileConstructor]"===o.call(t.File);e.deconstructPacket=function(t){var e=[],n=t.data,o=t;return o.data=function t(e,n){if(!e)return e;if(i(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(r(e)){for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=t(e[a],n);return s}if("object"!=(void 0===e?"undefined":u(e))||e instanceof Date)return e;for(var c in s={},e)s[c]=t(e[c],n);return s}(n,e),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=function t(e,n){if(!e)return e;if(e&&e._placeholder)return n[e.num];if(r(e))for(var i=0;i<e.length;i++)e[i]=t(e[i],n);else if("object"==(void 0===e?"undefined":u(e)))for(var o in e)e[o]=t(e[o],n);return e}(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){var n=0,o=t;!function t(c,h,f){if(!c)return c;if(s&&c instanceof Blob||a&&c instanceof File){n++;var l=new FileReader;l.onload=function(){f?f[h]=this.result:o=this.result,--n||e(o)},l.readAsArrayBuffer(c)}else if(r(c))for(var p=0;p<c.length;p++)t(c[p],p,c);else if("object"==(void 0===c?"undefined":u(c))&&!i(c))for(var d in c)t(c[d],d,c)}(o),n||e(o)}}).call(this,n(1))},function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,i=t.indexOf("["),o=t.indexOf("]");-1!=i&&-1!=o&&(t=t.substring(0,i)+t.substring(i,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=n.exec(t||""),a={},c=14;c--;)a[r[c]]=s[c]||"";return-1!=i&&-1!=o&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e,n){(function(e){var r=n(21),i=n(0)("socket.io-client:url");t.exports=function(t,n){var o=t;n=n||e.location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t=void 0!==n?n.protocol+"//"+t:"https://"+t),i("parse %s",t),o=r(t)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var s=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+s+":"+o.port,o.href=o.protocol+"://"+s+(n&&n.port===o.port?"":":"+o.port),o}}).call(this,n(1))},function(t,e,n){var r=n(22),i=n(4),o=n(8),s=n(0)("socket.io-client");t.exports=e=c;var a=e.managers={};function c(t,e){"object"==(void 0===t?"undefined":u(t))&&(e=t,t=void 0),e=e||{};var n,i=r(t),c=i.source,h=i.id,f=i.path,l=a[h]&&f in a[h].nsps;return n=e.forceNew||e["force new connection"]||!1===e.multiplex||l?(s("ignoring socket cache for %s",c),o(c,e)):(a[h]||(s("new io instance for %s",c),a[h]=o(c,e)),a[h]),i.query&&!e.query&&(e.query=i.query),n.socket(i.path,e)}e.protocol=i.protocol,e.connect=c,e.Manager=n(8),e.Socket=n(7)},function(t,e,n){t.exports=n(23)}],t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==(void 0===e?"undefined":u(e))&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=24);function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e,n},"object"==(void 0===n?"undefined":u(n))&&"object"==(void 0===e?"undefined":u(e))?e.exports=a():(i=[],void 0===(o="function"==typeof(r=a)?r.apply(n,i):r)||(e.exports=o))},req:function(t){return p({}[t],t)},m:{exports:{}}},p(1555506639226))},function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,(t.exports=n).id=9},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Interface=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=n(0),s=n(1),a=n(3);function c(t){var e=t.mainThis,n=t.Out,r=t.DocMethods,i=t.thirdPartyUserId,o=t.deferQueue,s=t.Permission;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.mainThis=e,this.out=n,this.msgTemp=n.msgTemp,this.request=n.request,this.send=n.send,this.docMethods=r,this.thirdPartyUserId=i,this.deferQueue=o,this.permission=s}e.Interface=(function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(c,[{key:"loadDoc",value:function(t,e){this.docMethods.loadDoc((function(e){t(e)}),e)}},{key:"destroyInstance",value:function(){this.mainThis.disconnectMessageService()}},{key:"prev",value:function(){this.commonPage({type:0})}},{key:"next",value:function(){this.commonPage({type:1})}},{key:"commonPage",value:function(t){var e=t.type,n=t.toPage,r=this.out.slideParam,i=r.currentPage,o=r.page,s=!1;0===e?s=--i<0:1===e?s=++i>=o:2===e&&((!parseInt(n)||parseInt(n)<1)&&reject(),i=o<=n?o-1:n-1),s||(this.out.slideParam.currentPage=i,this.out.slideParam.command[0].params.slideIndex=i,this.deferQueue.pushPromise(this.out.slideParam,this.send))}},{key:"keepDoc",value:function(t,e){var n=0<arguments.length&&void 0!==t?t:function(){},r=1<arguments.length&&void 0!==e?e:function(){};this.request(o.API_URL.SENDSPECIAL,{},(function(t){n(t)}),(function(t){r(t)}))}},{key:"createDoc",value:function(t,e,n){var i=t.documentId,c=t.cw,u=t.ch,h=this,f=2<arguments.length&&void 0!==n?n:function(){};this.destroyContainer(),this.request(o.API_URL.GETDOCINFO,{document_id:i},(function(t){var e=(0,a.generateUUID)("document",7);s.canvasData.currentCid=e,s.canvasData[e]={cid:e,cw:c,ch:u,docId:t.data.document_id,doc_type:2,is_board:1,canvas:[],backgroundColor:"transparent",stroke:"black",strokeWidth:2,ext:t.data.ext},h.out.createMsg(1,{cid:e,cw:c,ch:u,docId:t.data.document_id}),h.out.activeMsg(1,{cid:e,cw:c,ch:u,docId:t.data.document_id}),h.out.initSlidePage(r({},t.data,{docId:t.data.document_id,pageNumber:0,cid:s.canvasData[s.canvasData.currentCid].cid,cw:s.canvasData[s.canvasData.currentCid].cw,ch:s.canvasData[s.canvasData.currentCid].ch})),h.deferQueue.pushPromise(h.out.slideParam,h.send)}),(function(t){f(t)}))}},{key:"createBoard",value:function(t){var e=t.cw,n=t.ch,r=t.backgroundColor;this.destroyContainer();var i=(0,a.generateUUID)("board",7);s.canvasData.currentCid=i,s.canvasData[i]={cid:i,cw:e,ch:n,width:e,height:n,doc_type:2,is_board:2,canvas:[],backgroundColor:r,stroke:"black",strokeWidth:2,ext:""},this.out.createMsg(2,{cid:i,cw:e,ch:n,backgroundColor:r}),this.out.activeMsg(2,{cid:i,cw:e,ch:n,backgroundColor:r})}},{key:"destroyContainer",value:function(){s.canvasData.currentCid&&this.out.destroyMsg()}},{key:"clearCanvas",value:function(){s.canvasData.currentCid&&this.out.clearCanvasMsg()}},{key:"resetDoc",value:function(t,e){var n=0<arguments.length&&void 0!==t?t:function(){},r=1<arguments.length&&void 0!==e?e:function(){};this.request(o.API_URL.RESETWATCHINFO,{},(function(t){n(t)}),(function(t){r(t)}))}},{key:"touchstart",value:function(t){switch(s.canvasData.currentPen){case 1:this.docMethods.startPen(t);break;case 0:var e=this.docMethods.actEraser({x:t.touches[0].x,y:t.touches[0].y});e&&this.out.removeMsg(e)}}},{key:"touchmove",value:function(t){switch(s.canvasData.currentPen){case 1:this.docMethods.movePen(t)}}},{key:"touchend",value:function(t){switch(s.canvasData.currentPen){case 1:this.docMethods.endPen(t)}}},{key:"setPen",value:function(){s.canvasData.currentPen=1}},{key:"setStrokeWidth",value:function(t){s.canvasData.currentStrokeWidth=t}},{key:"setStroke",value:function(t){s.canvasData.currentStroke=t}},{key:"setEraser",value:function(){s.canvasData.currentPen=0}},{key:"switchOnContainer",value:function(){this.out.switchOnMsg()}},{key:"switchOffContainer",value:function(){this.out.switchOffMsg()}},{key:"setRole",value:function(t){this.permission.role=t}}]),c)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=n(0),s=n(1),a=(function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(c,[{key:"request",value:function(t,e,n,r){e.client=this.client,e.app_id=this.app_id,e.third_party_user_id=this.third_party_user_id,e.access_token=this.access_token,e.package_check=this.package_check,e.channel_id=this.channelId,e.room_id=this.room_id,wx.request({url:""+this.host+t,data:e,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){400<=t.statusCode?r({code:400,message:"调用接口失败"}):200!==t.data.code?r(t.data):n(t.data)},fail:r})}},{key:"msgTemp",value:function(){return{hash:"",uniqueID:Date.now(),currentPage:0,page:1,currentStep:0,step:1,cw:300,ch:150,width:300,height:150,cid:"",ext:"",version:"1.0.0",doc_type:2,command:[],flipOver:0,docId:"",pf:"js"}}},{key:"send",value:function(t){var e=this,n={type:"service_document",body:"string"==typeof t?t:JSON.stringify(t)};if(!this.Permission.permission.pageable||!this.Permission.permission.pageable){if(!this.Permission.permission.pageable&&t.command[0].event==o.OPERATETYPE.ONSLIDERCHANGE)return Promise.resolve();if(!this.Permission.permission.editable&&t.command[0].event!=o.OPERATETYPE.ONSLIDERCHANGE)return Promise.resolve()}return new Promise((function(t){e.request(e.sendAPI,n,(function(){t()}))}))}},{key:"initSlidePage",value:function(t){var e=this.msgTemp();this.slideParam=r({},e,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({hash:t.hash,currentPage:t.pageNumber,page:t.page,currentStep:0,step:1,cw:t.cw,ch:t.ch,width:t.width,height:t.height,ext:t.ext,cid:t.cid,doc_type:2,docId:t.docId,command:[{cid:t.cid,stamp:e.uniqueID,type:"",params:{docId:t.docId,hash:t.hash,slideIndex:t.pageNumber,slidesTotal:t.page,stepIndex:0,stepsTotal:1,originWidth:t.width,originHeight:t.height,userId:this.third_party_user_id,senderId:this.third_party_user_id,s:e.uniqueID,version:e.version},event:o.OPERATETYPE.ONSLIDERCHANGE,op:o.OPERATETYPE.FILPOVER,is_board:t.is_board}],flipOver:1},"docId",t.document_id||t.docId))}},{key:"createMsg",value:function(t,e){var n=this.msgTemp();n=r({},n,{cid:e.cid,cw:e.cw,ch:e.ch,docId:e.docId,command:[{type:o.OPERATETYPE.CREATE,data:{id:e.cid,width:e.cw,height:e.ch,backgroundColor:1==t?"transparent":e.backgroundColor,type:1==t?"document":"board"},stamp:n.uniqueID,event:o.OPERATETYPE.OPERATE,op:o.OPERATETYPE.CREATE,is_board:t}]}),this.deferQueue.pushPromise(n,this.send)}},{key:"activeMsg",value:function(t,e){var n=this.msgTemp();n=r({},n,{cid:e.cid,cw:e.cw,ch:e.ch,docId:e.docId,command:[{type:o.OPERATETYPE.ACTIVE,data:{id:e.cid,width:e.cw,height:e.ch,backgroundColor:1==t?"transparent":e.backgroundColor,type:1==t?"document":"board"},stamp:n.uniqueID,event:o.OPERATETYPE.OPERATE,op:o.OPERATETYPE.ACTIVE,is_board:t}]}),this.deferQueue.pushPromise(n,this.send)}},{key:"destroyMsg",value:function(){var t=this.msgTemp(),e=s.canvasData[s.canvasData.currentCid],n=e.doc_type,i=e.docId,a=e.cid,c=e.is_board;t=r({},t,{cid:a,doc_type:n,docId:i,command:[{type:o.OPERATETYPE.DESTROY,data:{id:a},stamp:t.uniqueID,event:o.OPERATETYPE.OPERATE,op:o.OPERATETYPE.DESTROY,is_board:c}]}),this.deferQueue.pushPromise(t,this.send)}},{key:"switchOnMsg",value:function(){s.canvasData.switchStatus=!0;var t=this.msgTemp();t=r({},t,{command:[{type:o.OPERATETYPE.SWITCHON,data:{id:""},stamp:t.uniqueID,event:o.OPERATETYPE.OPERATE,op:o.OPERATETYPE.SWITCHON}]}),this.deferQueue.pushPromise(t,this.send)}},{key:"switchOffMsg",value:function(){s.canvasData.switchStatus=!1;var t=this.msgTemp();t=r({},t,{command:[{type:o.OPERATETYPE.SWITCHOFF,data:{id:""},stamp:t.uniqueID,event:o.OPERATETYPE.OPERATE,op:o.OPERATETYPE.SWITCHOFF}]}),this.deferQueue.pushPromise(t,this.send)}},{key:"clearCanvasMsg",value:function(){var t=s.canvasData[s.canvasData.currentCid],e=t.hash,n=t.doc_type,i=t.docId,o=t.cid,a=t.cw,c=t.ch,u=t.slideIndex,h=t.slidesTotal,f=t.is_board,l=this.msgTemp();l=r({},l,{hash:e,cid:o,cw:a,ch:c,width:a,height:c,doc_type:n,docId:i,currentPage:u?u-1:0,page:h||1,command:[{type:"*remove_all",data:{pageId:e+"/"+(u?u-1:0)},stamp:l.uniqueID,event:"doodle",op:"clear",is_board:f}]}),this.deferQueue.pushPromise(l,this.send)}},{key:"removeMsg",value:function(t){var e=this.msgTemp(),n=s.canvasData[s.canvasData.currentCid],i=n.hash,o=n.vw,a=n.vh,c=n.cid,u=n.doc_type,h=n.docId,f=n.slideIndex,l=n.slidesTotal,p=n.is_board;e=r({},e,{cw:o,ch:a,width:o,height:a,cid:c,doc_type:u,docId:h,currentPage:f?f-1:0,page:l||1,hash:i,command:[{type:"*remove",data:{uuid:t,uniqueID:e.uniqueID,pageId:i+"/"+(f?f-1:0)},stamp:e.uniqueID,event:"doodle",op:"eraser",is_board:p}]}),this.deferQueue.pushPromise(e,this.send)}}]),c);function c(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.app_id=t.appId,this.third_party_user_id=t.thirdPartyUserId,this.access_token=t.accessToken,this.channelId=t.channelId,this.room_id=t.roomId,this.package_check="peter",this.client="wechat_applet",this.host="https://api.vhallyun.com/sdk",this.initAPI="/v1/init/start",this.sendAPI="/v2/message/send",this.request=this.request.bind(this),this.documentServer=null,this.slideParam=null,this.deferQueue=e,this.Permission=n,this.send=this.send.bind(this),this.request=this.request.bind(this),this.msgTemp=this.msgTemp.bind(this),this.initSlidePage=this.initSlidePage.bind(this)}e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o,s=n(13),a=(o=n(2))&&o.__esModule?o:{default:o},c=n(0),u=n(1),h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,s.Board),function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(f,[{key:"docSliderImg",value:function(t){var e=t.msg,n=t.documentServer;if((u.canvasData[e.data.cid].slideIndex?u.canvasData[e.data.cid].slideIndex-1:0)!=e.data.command[0].params.slideIndex||u.canvasData[e.data.cid].hash!=e.data.hash){u.canvasData[e.data.cid].hash=e.data.hash,u.canvasData[e.data.cid].width=e.data.width,u.canvasData[e.data.cid].height=e.data.height;var i=u.canvasData[e.data.cid].imageUrl=n+"/"+e.data.hash+"/"+(Number(e.data.command[0].params.slideIndex)+1)+".jpg";u.canvasData[e.data.cid].slideIndex=e.data.command[0].params.slideIndex+1,u.canvasData[e.data.cid].slidesTotal=e.data.command[0].params.slidesTotal,this.out.initSlidePage(r({},e.data,{pageNumber:e.data.command[0].params.slideIndex})),this.changeImgURl(e.data.cid,i),this.setPageData(e),this.compute({cid:e.data.cid,originHeight:e.data.command[0].params.originHeight,originWidth:e.data.command[0].params.originWidth}),a.default.emit(c.Event.EVENTPAGECHANGE,{slideIndex:u.canvasData[e.data.cid].slideIndex,slidesTotal:u.canvasData[e.data.cid].slidesTotal})}}},{key:"setPageData",value:function(t){t.data.pageData?(u.canvasData[t.data.cid].canvas=this.pageDataFilter(t.data.pageData),1!=this.Permission._role&&!u.canvasData.switchStatus||this.setAllCanvasData(t.data.cid)):(u.canvasData[t.data.cid].canvas=[],1!=this.Permission._role&&!u.canvasData.switchStatus||this.viewsClear(t.data.cid))}},{key:"compute",value:function(t){var e=t.cid,n=t.originHeight,r=t.originWidth;if(!u.canvasData[e].imgVw&&!u.canvasData[e].imgVh){var i=u.canvasData[e],o=i.vw,s=i.vh;n<=r?(u.canvasData[e].imgVw=o,u.canvasData[e].imgVh=o/r*n):(u.canvasData[e].imgVh=s,u.canvasData[e].imgVw=s/n*r),this.setDocImg({cid:e,imgVw:u.canvasData[e].imgVw,imgVh:u.canvasData[e].imgVh})}}}]),f);function f(t){var e=t.THIS,n=t.canvasBoxId,r=t.out,i=t.deferQueue,o=t.Permission;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));return s.appTHIS=e,s.canvasBoxId=n,s.delayTime=0,s.out=r,s.request=r.request,s.docSliderImg=s.docSliderImg.bind(s),s.compute=s.compute.bind(s),s.deferQueue=i,s.Permission=o,a.default.on(c.Event.LOADDOC,(function(t,e){s.loadDoc(t,e)})),s}e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Board=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o,s=(o=n(2))&&o.__esModule?o:{default:o},a=n(0),c=n(14),u=n(1),h=n(3);function f(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));return t.permission=null,t.out=null,t.request=null,t.switchStatus=!1,t.openContainer=t.openContainer.bind(t),t.closeContainer=t.closeContainer.bind(t),t.setCanvasData=t.setCanvasData.bind(t),t.setAllCanvasData=t.setAllCanvasData.bind(t),t.eraser=t.eraser.bind(t),t}e.Board=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,c.views),function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(f,[{key:"pageDataFilter",value:function(t){for(var e=t.filter((function(t){return"doodle"==t.command[0].event})),n=0;n<e.length;n++){var r=e[n];if("*remove_all"==r.command[0].type&&(e.splice(0,n+1),n=0),"*remove"==r.command[0].type){e.splice(n,1),n--;for(var i=0;i<e.length;i++)if(e[i].command[0].data.uuid==r.command[0].data.uuid){e.splice(i,1),i<=n&&n--;break}}}return e}},{key:"openContainer",value:function(){u.canvasData.switchStatus=!0,u.canvasData.currentCid&&this.viewsShowContainer({cid:u.canvasData.currentCid}),s.default.emit(a.Event.EVENTSWITCHCHANGE,{switchStatus:"on"})}},{key:"closeContainer",value:function(){u.canvasData.switchStatus=!1,u.canvasData.currentCid&&this.viewsCloseContainer(),s.default.emit(a.Event.EVENTSWITCHCHANGE,{switchStatus:"off"})}},{key:"createWatchContainer",value:function(t){}},{key:"destroyWatchContainer",value:function(t){s.default.emit(a.Event.DESTROYWATCHCONTAINER,t.data.command[0].data)}},{key:"setCanvasData",value:function(t){switch(t.command[0].data.gtype){case 1:return this.viewsAddFreeBrush(t);default:return Promise.resolve()}}},{key:"setAllCanvasData",value:function(t){if(this.deferQueue.pushPromise(t,this.viewsClear),u.canvasData[t].canvas.length){var e=!0,n=!1,r=void 0;try{for(var i,o=u.canvasData[t].canvas[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;this.deferQueue.pushPromise(s,this.setCanvasData)}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}}}},{key:"eraser",value:function(t){for(var e=0;e<u.canvasData[t.cid].canvas.length;e++)if(u.canvasData[t.cid].canvas[e].command[0].data.uuid==t.command[0].data.uuid){u.canvasData[t.cid].canvas.splice(e,1);break}this.setAllCanvasData(t.cid)}},{key:"actEraser",value:function(t){var e=t.x,n=t.y,r=u.canvasData[u.canvasData.currentCid],i=r.cw,o=r.vw;e*=i/o,n*=i/o;for(var s=u.canvasData[u.canvasData.currentCid].canvas.reverse(),a=0;a<s.length;a++){var c=s[a];if("*add"==c.command[0].type){var h=c.command[0].data,f=h.top,l=h.left,p=h.width,d=h.height,y=h.uuid;if(e<=l+p+20&&l-20<=e&&n<=f+d+20&&f-20<=n)return y}}return""}},{key:"loadDoc",value:function(t,e){var n=this,i=0<arguments.length&&void 0!==t?t:function(){},o=1<arguments.length&&void 0!==e?e:function(){};this.request(a.API_URL.GETWATCHINFO,{},(function(t){var e=t.data,o=e.list,s=e.switch_status,a=void 0,c={id:"",type:"",slideIndex:0,slidesTotal:0,switchStatus:0==s?"off":"on",docNum:0},h=!0,f=!1,l=void 0;try{for(var p,d=o[Symbol.iterator]();!(h=(p=d.next()).done);h=!0){var y=p.value;a={active:y.active,cid:y.cid,docId:y.docId,doc_type:2,ch:y.ch,cw:y.cw,width:y.width,height:y.height,is_board:y.is_board,pageData:y.pageData?y.pageData:[],imageUrl:1==y.is_board?u.canvasData.documentServer+"/"+y.hash+"/"+(Number(y.show_page)+1)+".jpg":"",backgroundColor:2==y.is_board?y.backgroundColor:"transparent",slideIndex:Number(y.show_page)+1,slidesTotal:Number(y.page),originHeight:y.height,originWidth:y.width,hash:y.hash,ext:y.ext},n.viewsCreateContainer(a),1==y.active&&(c={id:y.cid,type:1==y.is_board?"document":"board",slideIndex:Number(y.show_page)+1,slidesTotal:Number(y.page),switchStatus:0==s?"off":"on",docNum:o.length})&&n.out.initSlidePage(r({},y,{pageNumber:y.show_page}))}}catch(t){f=!0,l=t}finally{try{!h&&d.return&&d.return()}finally{if(f)throw l}}u.canvasData.switchStatus=s,i(c)}),(function(t){o(t)}))}},{key:"startPen",value:function(t){u.canvasData[u.canvasData.currentCid].prevPosition=[t.touches[0].x,t.touches[0].y],u.canvasData[u.canvasData.currentCid].movePosition=[t.touches[0].x,t.touches[0].y],u.canvasData[u.canvasData.currentCid].ActPath=[],u.canvasData[u.canvasData.currentCid].ActPath.push([t.touches[0].x,t.touches[0].y]),u.canvasData[u.canvasData.currentCid].stroke=u.canvasData.currentStroke?u.canvasData.currentStroke:"black",u.canvasData[u.canvasData.currentCid].strokeWidth=u.canvasData.currentStrokeWidth?u.canvasData.currentStrokeWidth:2,u.canvasData[u.canvasData.currentCid].doc_type=u.canvasData[u.canvasData.currentCid].doc_type?u.canvasData[u.canvasData.currentCid].doc_type:2}},{key:"movePen",value:function(t){u.canvasData[u.canvasData.currentCid].ActPath.push([t.touches[0].x,t.touches[0].y]),this.viewActDrawPath(u.canvasData.currentCid,t)}},{key:"endPen",value:function(t){var e=[],n=u.canvasData[u.canvasData.currentCid].ActPath,i=u.canvasData[u.canvasData.currentCid],o=i.width,s=i.height,a=i.cw,c=i.ch,f=i.vw,l=i.vh,p=i.cid,d=i.stroke,y=i.strokeWidth,v=i.doc_type,g=i.docId,m=i.slideIndex,b=i.slidesTotal,w=i.hash,_=i.is_board,E=i.ext,k=a/f;n=n.map((function(t){return t[0]*=k,t[1]*=k,t})),e.push(["M",n[0][0],n[0][1]]);for(var P=1;P<n.length-1;P+=2){var A=n[P],T=n[P+1];e.push(["Q",A[0],A[1],T[0],T[1]])}e.push(["L",n[n.length-1][0],n[n.length-1][1]]);var S=this.out.msgTemp(),C=(0,h.specialPoint)(e),O=C.minLeft,I=C.maxRight,D=C.minTop,R=C.maxBottom;S=r({},S,{hash:w,cw:a,ch:c,width:o,height:s,cid:p,doc_type:v,docId:g,ext:E,currentPage:m?m-1:0,page:b||1,command:[{type:"*add",data:{type:"path",uuid:(0,h.generateUUID)("",5),left:O,top:D,stroke:d,strokeWidth:y*k,width:I-O,height:R-D,gtype:1,path:e,cw:a||f,ch:c||l},stamp:S.uniqueID,event:"doodle",op:"path",is_board:_}]}),this.deferQueue.pushPromise(S,this.out.send)}}]),f)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.views=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=h(n(15)),a=n(1),c=h(n(2)),u=n(0);function h(t){return t&&t.__esModule?t:{default:t}}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),this.appTHIS=null,this.canvasBoxId=null,this.switchStatus=null,this.appList=[],this.viewsCreateContainer=this.viewsCreateContainer.bind(this),this.viewsActiveContainer=this.viewsActiveContainer.bind(this),this.viewsDestroyContainer=this.viewsDestroyContainer.bind(this),this.viewsAddFreeBrush=this.viewsAddFreeBrush.bind(this),this.viewsClear=this.viewsClear.bind(this)}e.views=(function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(l,[{key:"changeImgURl",value:function(t,e){for(var n=0;n<this.appList.length;n++)if(this.appList[n].cid==t){var r=this.canvasBoxId+"["+n+"].imageUrl";this.appTHIS.setData(f({},r,e));break}}},{key:"viewsCreateContainer",value:function(t){var e=this,n=t.width,r=t.height,i=t.cid,o=t.backgroundColor,s=t.ch,h=t.cw,l=t.imageUrl,p=t.is_board,d=t.pageData,y=t.active,v=t.slideIndex,g=t.slidesTotal,m=t.originHeight,b=t.originWidth,w=t.docId,_=t.doc_type,E=t.hash;return new Promise((function(t){a.canvasData[i]={width:n,height:r,cw:h,ch:s,hash:E,docId:w,doc_type:_,is_board:p,type:2==p?"board":"document",slideIndex:2==p?0:v,slidesTotal:2==p?0:g,active:y,canvasBoxId:e.canvasBoxId,imageUrl:l,cid:i,backgroundColor:o,canvas:e.pageDataFilter(d)};var k={active:y,cid:i,imageUrl:l};e.appList.push(k),y&&(a.canvasData.currentCid=i),wx.createSelectorQuery().in(e.appTHIS).select("#"+e.canvasBoxId).boundingClientRect((function(n){var r;a.canvasData[i].ratio=n.width/h;var o=s/h*n.width,l=n.width,d=!0,y=!1,v=void 0;try{for(var g,w=e.appList[Symbol.iterator]();!(d=(g=w.next()).done);d=!0){var _=g.value;_.cid==i&&(_.vh=o)}}catch(n){y=!0,v=n}finally{try{!d&&w.return&&w.return()}finally{if(y)throw v}}a.canvasData[i]&&(a.canvasData[i].vh=o,a.canvasData[i].vw=l,(b||m)&&e.compute({cid:i,originHeight:m,originWidth:b})),e.appTHIS.setData((f(r={},e.canvasBoxId,e.appList),f(r,"switchStatus",1==e.Permission._role?1:a.canvasData.switchStatus),r),(function(){1!=e.Permission._role&&!a.canvasData.switchStatus||e.setAllCanvasData(i),c.default.emit(u.Event.CREATECONTAINER,{id:"view-"+i,type:2==p?"board":"document",docNum:e.appList.length}),t()}))})).exec()}))}},{key:"viewsDestroyContainer",value:function(t){var e=this,n=t.cid;return new Promise((function(t){a.canvasData.currentCid="",delete a.canvasData[n];for(var r=0;r<e.appList.length;r++)if(e.appList[r].cid==n){e.appList.splice(r,1);break}e.appTHIS.setData(f({},e.canvasBoxId,e.appList),(function(){c.default.emit(u.Event.DESTROYCONTAINER,{id:n,docNum:e.appList.length}),t()}))}))}},{key:"viewsShowContainer",value:function(t){var e=this,n=t.cid;a.canvasData.switchStatus=1,this.appTHIS.setData({switchStatus:a.canvasData.switchStatus},(function(){e.setAllCanvasData(n)}))}},{key:"viewsCloseContainer",value:function(){a.canvasData.switchStatus=0,this.appTHIS.setData({switchStatus:a.canvasData.switchStatus})}},{key:"viewsAddFreeBrush",value:function(t){var e=wx.createCanvasContext(t.cid,this.appTHIS),n=a.canvasData[t.cid].vw/t.command[0].data.cw;return s.default.drawPath(e,i({},t.command[0].data,{ratio:n}))}},{key:"viewsClear",value:function(t){var e=wx.createCanvasContext(t,this.appTHIS);return s.default.drawNewCanvas(e,a.canvasData[t])}},{key:"viewsActiveContainer",value:function(t){var e=this,n=t.cid;return new Promise((function(t){for(var i in a.canvasData)"object"==r(a.canvasData[i])&&(a.canvasData[i].active=0);a.canvasData[n].active=1,a.canvasData.currentCid=n;var o=!0,s=!1,h=void 0;try{for(var l,p=e.appList[Symbol.iterator]();!(o=(l=p.next()).done);o=!0){var d=l.value;d.cid==n?d.active=1:d.active=0}}catch(t){s=!0,h=t}finally{try{!o&&p.return&&p.return()}finally{if(s)throw h}}e.appTHIS.setData(f({},e.canvasBoxId,e.appList),(function(){1!=e.Permission._role&&!a.canvasData.switchStatus||e.setAllCanvasData(n),c.default.emit(u.Event.ACTIVECONTAINER,{id:n,slideIndex:a.canvasData[n].slideIndex,slidesTotal:a.canvasData[n].slidesTotal,type:a.canvasData[n].type}),t()}))}))}},{key:"setDocImg",value:function(t){var e=t.cid,n=t.imgVw,r=t.imgVh,i=!0,o=!1,s=void 0;try{for(var a,c=this.appList[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var u=a.value;if(u.cid==e){u.imgVw=n,u.imgVh=r;break}}}catch(t){o=!0,s=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw s}}this.appTHIS.setData(f({},this.canvasBoxId,this.appList),(function(){}))}},{key:"viewActDrawPath",value:function(t,e){var n=wx.createCanvasContext(t,this.appTHIS);s.default.drawActPath(n,t,e)}},{key:"viewshowActContainer",value:function(){}}]),l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}e.default={drawNewCanvas:function(t,e){var n=e.backgroundColor,r=e.vw,i=e.vh;return new Promise((function(e){t.setFillStyle(n),t.fillRect(0,0,r,i),t.draw(!1,(function(){e()})),setTimeout((function(){e()}),350)}))},drawRect:function(t,e){var n=e.stroke,r=e.strokeWidth,i=e.left,o=e.top,s=e.width,a=e.height,c=e.ratio;t.setStrokeStyle(n),t.setLineWidth(r*c),t.strokeRect(i*c,o*c,s*c,a*c),t.draw(!0)},drawEllipse:function(t,e){var n=e.stroke,r=e.strokeWidth,i=e.left,o=e.top,s=e.width,a=e.height,c=(e.rx,e.ry,e.ratio);t.setStrokeStyle(n),t.setLineWidth(r*c);var u=s*c,h=a*c,f=i*c,l=o*c,p=u/2*.5522848,d=h/2*.5522848,y=f+u,v=l+h,g=f+u/2,m=l+h/2;t.beginPath(),t.moveTo(f,m),t.bezierCurveTo(f,m-d,g-p,l,g,l),t.bezierCurveTo(g+p,l,y,m-d,y,m),t.bezierCurveTo(y,m+d,g+p,v,g,v),t.bezierCurveTo(g-p,v,f,m+d,f,m),t.closePath(),t.stroke(),t.draw(!0)},drawTriangle:function(t,e){var n=e.stroke,r=e.strokeWidth,i=e.left,o=e.top,s=e.width,a=e.height,c=e.ratio;t.setStrokeStyle(n),t.setLineWidth(r*c);var u=s*c/2;t.beginPath(),t.moveTo(i*c+u,o*c),t.lineTo(i*c,(o+a)*c),t.lineTo((i+s)*c,(o+a)*c),t.closePath(),t.stroke(),t.draw(!0)},drawRightTriangle:function(t,e){var n=e.stroke,r=e.strokeWidth,i=e.left,o=e.top,s=e.width,a=e.height,c=e.ratio;e.path,t.setStrokeStyle(n),t.setLineWidth(r*c),t.moveTo(i*c,o*c),t.lineTo(i*c,(o+a)*c),t.lineTo((i+s)*c,(o+a)*c),t.closePath(),t.stroke(),t.draw(!0)},drawPath:function(t,e){var n=e.stroke,r=e.strokeWidth,i=(e.left,e.top,e.width,e.height,e.path),o=e.ratio;t.setStrokeStyle(n),t.setLineWidth(r*o),t.setLineCap("round"),t.setLineJoin("round"),t.beginPath();var s=!0,a=!1,c=void 0;try{for(var u,h=i[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var f=u.value;switch(f[0]){case"M":t.moveTo(f[1]*o,f[2]*o);break;case"Q":t.quadraticCurveTo(f[1]*o,f[2]*o,f[3]*o,f[4]*o);break;case"L":t.lineTo(f[1]*o,f[2]*o)}}}catch(e){a=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(a)throw c}}return t.stroke(),new Promise((function(e){t.draw(!0,(function(){e()}))}))},drawActPath:function(t,e,n){var o=r.canvasData[e],s=o.prevPosition,a=o.movePosition;t.setStrokeStyle(r.canvasData.currentStroke),t.setLineWidth(r.canvasData.currentStrokeWidth);var c=[].concat(i(s),[n.touches[0].x,n.touches[0].y]),u=c[0],h=c[1],f=c[2],l=c[3];t.setLineCap("round"),t.setLineJoin("round"),t.moveTo.apply(t,i(a)),t.quadraticCurveTo(u,h,(f+u)/2,(l+h)/2),t.stroke(),t.draw(!0),r.canvasData[e].prevPosition=[f,l],r.canvasData[e].movePosition=[(f+u)/2,(l+h)/2]}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Enter=void 0;var r=n(1);e.Enter=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.socket=e.socket,this.docMethods=e.DocMethods,r.canvasData.documentServer=this.socket.getKV("document_server"),this.thirdPartyUserId=e.thirdPartyUserId,this.socket.on("msg",(function(){})),this.socket.on("service_document",(function(t){switch(t.data="string"==typeof t.data?JSON.parse(t.data):t.data,"onSlideChange"==t.data.command[0].event&&n.docMethods.docSliderImg({msg:t,documentServer:r.canvasData.documentServer}),t.data.command[0].type){case"switchon":if(t.sender_id==n.thirdPartyUserId)return;n.docMethods.openContainer();break;case"switchoff":if(t.sender_id==n.thirdPartyUserId)return;n.docMethods.closeContainer();break;case"create":var e={hash:"",active:0,docId:t.data.docId,doc_type:2,cid:t.data.command[0].data.id,ch:t.data.command[0].data.height,cw:t.data.command[0].data.width,imageUrl:"",is_board:t.data.command[0].is_board,pageData:[],backgroundColor:2==t.data.command[0].is_board?t.data.command[0].data.backgroundColor:"transparent"};n.docMethods.viewsCreateContainer(e);break;case"destroy":n.docMethods.viewsDestroyContainer({cid:t.data.cid});break;case"active":n.docMethods.viewsActiveContainer({cid:t.data.cid});break;case"*add":try{if(r.canvasData[t.data.cid].canvas.push(t.data),n.thirdPartyUserId==t.sender_id)return;n.docMethods.setCanvasData(t.data)}catch(t){}break;case"*remove":n.docMethods.eraser(t.data);break;case"*remove_all":r.canvasData[t.data.cid].canvas=[],n.docMethods.viewsClear(t.data.cid)}}))}},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0});function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=n(0);function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=(function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(c,[{key:"role",set:function(t){this._role=t},get:function(){return this._role}},{key:"permission",get:function(){return u[this.role]||u[o.ROLE_TYPE.SPECTATOR]}}]),c);function c(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this._role=-1,this.editable=!1,this.pageable=!1,this.zoomable=!1}e.default=a;var u=(s(r={},o.ROLE_TYPE.HOST,{editable:!0,pageable:!0,zoomable:!0}),s(r,o.ROLE_TYPE.SPECTATOR,{editable:!1,pageable:!1,zoomable:!0}),s(r,o.ROLE_TYPE.GUEST,{editable:!1,pageable:!1,zoomable:!0}),s(r,o.ROLE_TYPE.ASSISTANT,{editable:!1,pageable:!0,zoomable:!0}),r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DeferQueue=void 0;var r,i,o=(r=n(19))&&r.__esModule?r:{default:r};function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:350;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.running=!1,this.delayTime=t,this.queue=[],this.list=[],this.pushPromise=this.pushPromise.bind(this),this._startPromise=this._startPromise.bind(this),this._checkNextPromise=this._checkNextPromise.bind(this)}e.DeferQueue=(function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(a,[{key:"push",value:function(t,e){this.queue.push({data:t,fn:e}),this._checkNext()}},{key:"_startExecuteQueue",value:(i=function(t){return function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(i,o){try{var s=e[i](o),a=s.value}catch(i){return void n(i)}if(!s.done)return Promise.resolve(a).then((function(t){r("next",t)}),(function(t){r("throw",t)}));t(a)}("next")}))}}(o.default.mark((function t(){var e,n,r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.running=!0,e=this.queue.shift()){t.next=5;break}return t.abrupt("return");case 5:return n=e.fn,r=e.data,n(r),t.next=9,this._delay(this.delayTime);case 9:this.running=!1,this._checkNext();case 11:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"_delay",value:function(t){return new Promise((function(e,n){setTimeout((function(){e()}),t)}))}},{key:"_checkNext",value:function(){if(0<this.queue.length){if(this.running)return;this._startExecuteQueue()}else this.running=!1}},{key:"pushPromise",value:function(t,e){var n=0<arguments.length&&void 0!==t?t:{},r=e;this.list.push({data:n,fn:r}),this._checkNextPromise()}},{key:"_checkNextPromise",value:function(){if(0<this.list.length){if(this.running)return;this._startPromise()}else this.running=!1}},{key:"_startPromise",value:function(){var t=this;this.running=!0;var e=this.list[0];e&&(0,e.fn)(e.data).then((function(){t.list.shift(),t.running=!1,t._checkNextPromise()}))}}]),a)},function(t,e,n){"use strict";t.exports=n(20)},function(t,e,n){"use strict";var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&0<=Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime"),o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(21),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(t,e,n){"use strict";(function(t){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n){var r,i=Object.prototype,o=i.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag",h="object"===e(t),f=n.regeneratorRuntime;if(f)h&&(t.exports=f);else{(f=n.regeneratorRuntime=h?t.exports:{}).wrap=_;var l="suspendedStart",p="suspendedYield",d="executing",y="completed",v={},g={};g[a]=function(){return this};var m=Object.getPrototypeOf,b=m&&m(m(R([])));b&&b!==i&&o.call(b,a)&&(g=b);var w=A.prototype=k.prototype=Object.create(g);P.prototype=w.constructor=A,A.constructor=P,A[u]=P.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===P||"GeneratorFunction"===(e.displayName||e.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(w),t},f.awrap=function(t){return{__await:t}},T(S.prototype),S.prototype[c]=function(){return this},f.AsyncIterator=S,f.async=function(t,e,n,r){var i=new S(_(t,e,n,r));return f.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},T(w),w[u]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},f.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},f.values=R,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return a.type="throw",a.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var i=this.tryEntries.length-1;0<=i;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var c=o.call(s,"catchLoc"),u=o.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:R(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}}}function _(t,e,n,r){var i=e&&e.prototype instanceof k?e:k,o=Object.create(i.prototype),s=new D(r||[]);return o._invoke=function(t,e,n){var r=l;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===y){if("throw"===i)throw o;return x()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=C(s,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var c=E(t,e,n);if("normal"===c.type){if(r=n.done?y:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=y,n.method="throw",n.arg=c.arg)}}}(t,n,s),o}function E(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function k(){}function P(){}function A(){}function T(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function S(t){var n;this._invoke=function(r,i){function s(){return new Promise((function(n,s){!function n(r,i,s,a){var c=E(t[r],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"===(void 0===h?"undefined":e(h))&&o.call(h,"__await")?Promise.resolve(h.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):Promise.resolve(h).then((function(t){u.value=t,s(u)}),a)}a(c.arg)}(r,i,n,s)}))}return n=n?n.then(s,s):s()}}function C(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,C(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=E(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function R(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())}).call(this,n(22)(t))},function(t,e,n){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}]);